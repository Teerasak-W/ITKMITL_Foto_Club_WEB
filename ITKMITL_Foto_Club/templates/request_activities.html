{% extends "base.html" %}
{% block content %}
{% load static %}
{% block javascript %}
  <script>
    $("#id_request_title").change(function () {
      console.log( $(this).val() );
      var request_title = $(this).val();
      $.ajax({
        url: '/ajax/validate_request_title/',
        data: {
          'request_title': request_title
        },
        dataType: 'json',
        success: function (data) {
          if (data.is_taken) {
            alert("A Request with this title already exists.");
          }
        }
      });
      console.log( $(this).val() );
    });
  </script>
{% endblock %}
<div class="center">
  <div class="container h-auto mb-5">
    <div class="row h-100">
      <div class="col-md-6 col-12 my-auto mx-auto">
        <div class="card px-0 py-0 border-0">
          <div class="py-3 text-center bg-primary font-weight-bold text-white rounded-top">
            <img src="{% static '/assets/logoHeader.png' %}" height="60" alt="">
          </div>
          <div class="card-body">
            <form method="post" enctype="multipart/form-data" data-validate-request_title-url="{% url 'validate_request_title' %}">
            {% csrf_token %}
            {% for field in form_RA %}
            <p>
                {{ field.label_tag }}<br>
                {{ field }}
                {% if field.help_text %}
                  <small style="color: grey">{{ field.help_text }}</small>
                {% endif %}
                {% for error in field.errors %}
                  <p style="color: red">{{ error }}</p>
                {% endfor %}
              </p>
            {% endfor %}
            <button type="submit" class="btn btn-lg btn-primary text-white w-100" tabindex="3">Submit</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}